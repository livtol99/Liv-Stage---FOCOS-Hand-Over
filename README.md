# SES Embedding Method on French Social Graph - Liv Tollånes Stage FOCOS 2024

This repository contains the scripts, outputs, and report from my time as an intern at the FOCOS group during 2024. 

## Table of Contents

1. [Project Summary](#1-project-summary)
2. [Repository Structure](#2-repository-structure)
3. [Data Locations in Server](#3-data-locations-in-server)
4. [The CORG-approach](#4-the-corg-approach)
5. [Contact Information](#5-contact-information)

## 1. Project Summary
My work included exploring the application of the SES embedding method (He & Tsvetkova, 2023), an approach developed to infer socioeconomic status (SES) from social network data, in a French context. 
The hope was that we could reproduce the findings of a somewhat clear relationship between estimated positions of users and their associated income. 
The validation procedure included correlation and regression analyses of the coordinates of users in the first three dimensions, and their associated income. 
Income was obtained by retrieving self reported job titles via an N-gram frequency analysis and a topken matching procedure. The users who had matching tokens (mentionning some jib titles in our list)were then manually inspected to weed out incorrectly assigned job titles. 


## 2. Repository Structure
```
├── Code
│   ├── Graph preparation
│   │   ├── CORG_wrangling.ipynb
│   │   └── Wrangling2.ipynb
│   ├── Utility files
│   │   ├── __pycache__
│   │   │   └── ca_pipeline.cpython-311.pyc
│   │   ├── ca_pipeline.py
│   │   ├── corg_pipeline.py
│   │   ├── model_comparison.py
│   │   └── utils2.py
│   ├── Validation
│   │   ├── CA_all_models.ipynb
│   │   ├── CORG.ipynb
│   │   ├── Diminspection.ipynb
│   │   ├── Income_val.ipynb
│   │   └── Income_val_prep.ipynb
│   ├── poetry.lock
│   └── pyproject.toml
├── Outputs
│   └── Outputs.pdf
└── README.md
```

### Folder structure

- **Graph preparation**: Contains a notebook for preparing data for the rest of the analysis.
- **Utility files**: Modules that support various parts of the project.
- **Validation**: Contains notebooks for performing the CA analysis, and all code for validating the results.
  
### File Descriptions

- **Graph preparation**
  - **Wrangling2.ipynb**: Notebook for inituial data cleaning, filtering the data, obtaining French users only, and creating an informative edgelist to use in further analyses. 

- **Utility files**
  - **ca_pipeline.py**: Pipeline script for running the Correspondence Analysis. Includes a class with methods to create a bipartite graph, various grapgh checks, and perform Correspondence Analysis (CA) on the french edgelist 
  - **model_comparison.py**: Contains a class to perform a WLS regression analysis and produce model comparison metrics.
  - **utils2.py**: Contains a collection of functions used throughout the project for various purposes.

- **Validation**
  - **CA_all_models.ipynb**: Notebook for fitting the CA pipeline and obtain estimate files for all nine models. Includes graph checks. 
  - **Diminspection.ipynb**: Various outcome inspection of the CA estimates. 
  - **Income_val.ipynb**: Preparation of the validation data. Includes the N-gram frequency analysis of bios. Final file is the user data with bios, job titles, and associated income. 
  - **Income_val_prep.ipynb**: 

- **poetry.lock**: Dependency lock file generated by Poetry.
- **pyproject.toml**: Configuration file for the Poetry package manager, specifying dependencies and project metadata.
- **requirements_backup.txt**: A backup file for an old virtual environment.


## 3. Data
The data collection took place in March 2023, and access was granted for use in the current study through my affiliations with the Formal Computational Socio-Politics Group at the Learning Planet Institute in Paris and Institut des Systèmes Complexes de Paris Île-de-France (ISC - PIF). It is not accessible in this repository, meaning that the code in the repository cannot be ran without an application for data access. 

## 4. Contact Information
au e-mail: 201905665@post.au.dk

